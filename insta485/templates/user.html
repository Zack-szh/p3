<!DOCTYPE html>
<html lang="en">

<head> 
    <meta charset="utf-8">
    <title> insta485 </title>
</head>

<body>
    <!--Navigation bar-->>
    <nav> 
        <a href="/">insta485</a> | 
        <a href="/explore/">explore</a> | 
        <a href="/users/{{ logname }}/">{{ logname }}</a>
    </nav>

    <h1>{{ username }}</h1>

    {% if logname == username %}
        <a href="/accounts/edit/">Edit profile</a>

        <form action="/accounts/logout/" method="post" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="submit" name="logout" value="Logout"/>
        </form>
    {% endif %}

    {% if logname != username %}
        {% if logname_follows_username %}
            <p>following</p>
            <form action="/following/?target=/users/{{ username }}/" method="post" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="submit" name="unfollow" value="unfollow"/>
            <input type="hidden" name="username" value="{{ username }}"/>
            <input type="hidden" name="operation" value="unfollow"/>
            </form>
        {% elif not logname_follows_username %}
            <p>not following</p>
            <form action="/following/?target=/users/{{ username }}/" method="post" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="submit" name="follow" value="follow"/>
            <input type="hidden" name="username" value="{{ username }}"/>
            <input type="hidden" name="operation" value="follow"/>
            </form>
        {% endif %}
    {% endif %}

    
    <p>{{ total_posts }} {{ "post" if total_posts == 1 else "posts"}}
        <a href="/users/{{ username }}/followers/">
            {{ followers }} {{ "follower" if followers == 1 else "followers"}}
        </a>
        <a href="/users/{{ username }}/following/">
            {{ following }} following
        </a>
    </p>
    <p>{{ fullname }}</p>

    {% if logname == username%}
        <form action="/posts/?target=/" method="post" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="file" name="file" accept="image/*" required/>
            <input type="submit" name="create_post" value="upload new post"/>
            <input type="hidden" name="operation" value="create"/>
        </form>
    {% endif %}

    <div> 
        {% for post in posts %}
        <a href="/posts/{{ post.postid }}/"> 
            <img src="{{ post.img_url }}" alt="postPic" height="400" width="400"> 
        </a>
        {% endfor %}
    </div>

    {% if not posts %}
        No posts yet.
    {% endif %}

</body> 
</html>